# Quadra

> 极简 macOS 待办事项应用 —— 零依赖、本地优先、秒开秒用

**Quadra** 是一款专为 macOS 设计的原生待办事项管理工具，采用 SwiftUI 构建，无需联网，数据完全存储在本地。名称源自 "Quadrant"（象限），体现其核心的四象限任务分类功能。

---

## 功能特性

### 核心功能
- **任务管理** — 添加、编辑、删除、标记完成
- **优先级标记** — 高/中/低/无四级优先级，颜色区分
- **到期日期** — 支持今天/明天/下周/自定义日期
- **标签系统** — 创建自定义标签，快速分类任务
- **拖拽排序** — 手动调整任务顺序
- **撤销/重做** — 支持 50 步操作历史

### 四象限视图（艾森豪威尔矩阵）
按「重要性 × 紧急性」将任务自动分类到四个象限：

```
        紧急                    不紧急
   ┌─────────────────┬─────────────────┐
重 │ 🔴 重要且紧急     │ 🟠 重要但不紧急   │
要 │   → 立即执行      │   → 计划安排      │
   ├─────────────────┼─────────────────┤
不 │ 🟡 不重要但紧急   │ ⚪ 不重要不紧急   │
重 │   → 考虑委托      │   → 考虑删除      │
要 └─────────────────┴─────────────────┘
```

### 搜索与过滤
- 实时搜索（标题关键词匹配）
- 按优先级筛选
- 按标签筛选
- 待办/已完成分组显示

### 数据管理
- JSON 文件本地存储
- 原子写入保证数据安全
- 支持数据导入/导出
- 自动备份机制

### 界面特性
- 深色/浅色模式自适应
- 多选批量操作
- 右键快捷菜单
- 底部统计面板

---

## 快捷键

| 快捷键 | 功能 |
|--------|------|
| `⌘N` | 新建任务 |
| `⌘⌫` | 删除选中任务 |
| `⌘⏎` | 切换完成状态 |
| `Enter` | 编辑选中任务 |
| `Esc` | 取消编辑 |
| `⌘F` | 聚焦搜索框 |
| `⌘Z` | 撤销 |
| `⌘⇧Z` | 重做 |
| `⌘⇧Q` | 切换视图模式（列表/四象限） |
| `⌘⇧K` | 清除所有已完成 |
| `⌘0/1/2/3` | 设置优先级（无/高/中/低） |
| `⌘I` | 导入数据 |
| `⌘E` | 导出数据 |

---

## 安装

### 系统要求
- macOS 14.0 Sonoma 或更高版本

### 从源码构建

1. 克隆仓库
```bash
git clone https://github.com/your-username/Quadra.git
cd Quadra
```

2. 使用 Xcode 打开项目
```bash
open Quadra.xcodeproj
```

3. 构建并运行（`⌘R`）

或使用命令行构建：
```bash
xcodebuild -scheme Quadra -configuration Release build
```

---

## 架构设计

```
┌─────────────────────────────────────────────┐
│                   Views                      │
│  ContentView · TodoRow · QuadrantView        │
└──────────────────┬──────────────────────────┘
                   │ @StateObject
                   ▼
┌─────────────────────────────────────────────┐
│                TodoStore                     │
│  状态管理 · CRUD · 撤销重做 · 排序过滤        │
└──────────────────┬──────────────────────────┘
                   │ Codable (原子写入)
                   ▼
┌─────────────────────────────────────────────┐
│              JSON File                       │
│  ~/Library/.../Quadra/data.json             │
└─────────────────────────────────────────────┘
```

### 目录结构

```
Quadra/
├── QuadraApp.swift         # 应用入口 + 菜单命令
├── Notifications.swift     # 通知定义（菜单 ↔ 视图通信）
├── Models/
│   ├── Todo.swift          # 任务模型
│   ├── TodoData.swift      # 数据容器
│   ├── Tag.swift           # 标签模型
│   └── Quadrant.swift      # 四象限枚举
├── Store/
│   └── TodoStore.swift     # 状态管理 + 持久化
└── Views/
    ├── ContentView.swift   # 主界面
    ├── TodoRow.swift       # 任务行组件
    ├── QuadrantView.swift  # 四象限视图
    └── QuadrantCard.swift  # 象限卡片组件
```

---

## 数据存储

数据文件位置：`~/Library/Application Support/Quadra/`

```json
{
  "version": 1,
  "todos": [
    {
      "id": "uuid",
      "title": "任务标题",
      "isCompleted": false,
      "priority": "high",
      "dueDate": "2026-01-15T23:59:59Z",
      "tagIds": ["tag-uuid"],
      "createdAt": "2026-01-09T10:00:00Z"
    }
  ],
  "tags": [
    {
      "id": "tag-uuid",
      "name": "工作",
      "color": "blue"
    }
  ]
}
```

---

## 开发

### 环境要求

| 项目 | 版本 |
|------|------|
| macOS | 14.0+ |
| Xcode | 15.0+ |
| Swift | 5.9+ |

### 运行测试

```bash
xcodebuild test -scheme Quadra -destination 'platform=macOS'
```

### 设计原则

1. **零依赖** — 仅使用系统框架（SwiftUI、Foundation）
2. **本地优先** — 数据完全本地存储，无需联网
3. **原子写入** — 保证数据完整性，防止丢失
4. **单一数据源** — TodoStore 持有唯一真相
5. **简洁架构** — View → Store → File 三层结构

---

## 为什么叫 Quadra？

**Quadra** 源自拉丁语 "Quadrant"（象限），体现了应用的核心特色——艾森豪威尔矩阵四象限任务分类法。这个名字简短、现代、富有几何美感，同时暗示了应用帮助用户将混乱的任务按重要性和紧急性分类整理的能力。

---

## 许可证

MIT License

---

## 贡献

欢迎提交 Issue 和 Pull Request！

---

*Made with SwiftUI for macOS*
